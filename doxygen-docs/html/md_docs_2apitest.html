<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SSS - S3 Toolkit: API Test</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SSS - S3 Toolkit<span id="projectnumber">&#160;0.9.6</span>
   </div>
   <div id="projectbrief">S3 client library and applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2apitest.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">API Test</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md15"></a> </p>
<h1><a class="anchor" id="autotoc_md16"></a>
Configuration</h1>
<p>All tests read the value of access, key and url endpoint from environment variables which need to be passed on the command line, e.g. <code>./bucket-test S3TEST_ACCESS S3TEST_SECRET S3TEST_URL</code>.</p>
<p>Each test driver contains multiple tests printing output to <code>stdin</code> in <em>CSV</em> format:</p>
<p><code>&lt;test name&gt;,&lt;result =</code>1<code>for pass |</code>0<code>for fail&gt;,&lt;blank | optional error message&gt;</code></p>
<p>and checks that an S3 endpoint is available and accessible and reports an error in case of failure.</p>
<p>The test drivers will create buckets and objects named <code>sss-api-test-</code> + timestamp.</p>
<p>Tests require an S3 endpoint to be accessible.</p>
<p>One option is to use the free <em>play.min.io</em> service; other options are to configure a local instance of the <em>minio</em> server or use an AWS S3 account.</p>
<p>When testing with an AWS S3 account extract credentials from file <code>.aws/credentials</code> and use the url: <code><a href="https://s3">https://s3</a>.&lt;region e.g. us-east-1&gt;.amazonaws.com</code> as the endpoint.</p>
<p>The access and secret keys for <em>play.min.io</em> are stored inside the <code>~/.mc/config.json</code> file configured after installing the <a href="https://min.io/docs/minio/linux/reference/minio-mc.html">minio client</a>.</p>
<p>The script <code>minio_podman_setup.sh</code> downloads configures and runs a <em>minio</em> server instance inside a container using <em>podman</em>.</p>
<p>Run the script after building all the applications, making sure that the <code>s3-gen-credentials</code> executable is findable through the <code>PATH</code> variable.</p>
<p>Usage </p><div class="fragment"><div class="line">./minio_podman_setup.sh &lt;minio alias&gt; &lt;data path&gt;</div>
</div><!-- fragment --><p> Run </p><div class="fragment"><div class="line">chmod u+x ./minio_podman_setup.sh</div>
<div class="line">./minio_podman_setup.sh myalias ~/tmp/minio_data</div>
</div><!-- fragment --><p>In cases where the <em>minio</em> server is already installed and available, you can invoke the <code>minio_run_server.sh</code> instead.</p>
<div class="fragment"><div class="line">chmod u+x ./minio_run_server.sh</div>
<div class="line">./minio_run_server.sh myalias ~/tmp/minio_data</div>
</div><!-- fragment --><p>Both scripts output access, secret and URL which should be stored into environment variables, the optional third argument to the scripts is the name of the file where environment variables are stored: use <code>source</code> &lt;filename&gt; to set all environment variables.</p>
<p>The <code>test</code> directory includes tests for the high level interface and the S3 API.</p>
<p>All tests require passing the name of the environment variables storing access, secret and endpoint URL information.</p>
<p>The provided <code>.sh</code> scripts inside the <code>test</code> directory can run all the tests at once. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
